# 병합 정렬(Merge Sort)

> 병합 정렬은 일반적으로 구현했을 때 안정 정렬(stable)에 속하며, 분할 정복 알고리즘의 하나이다.

<br>

![병합 정렬](https://github.com/chanyDev/TIL/blob/main/img/%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98/%EC%A0%95%EB%A0%AC/%EB%B3%91%ED%95%A9%20%EC%A0%95%EB%A0%AC.svg?raw=true)

<br>

## 분할 정복 알고리즘(Divide and conquer algorithm)

분할 정복 알고리즘은 그대로 해결할 수 없는 문제를 작은 문제로 분할하여 문제를 해결하는 알고리즘이다.

다음과 같은 특징을 가진다.

- 문제를 작은 2개의 문제로 분리하고 각각을 해결한 다음 결과를 모아서 원래의 문제를 해결하는 방법이다.
- 분할 정복 알고리즘은 보통 재귀 함수로 구현한다.

<br>

## 특징

- 데이터 분포에 영향을 덜 받는다.
- 항상 동일한 시간이 소요되기 때문에 어떤 경우에도 좋은 성능을 보장받는다.
- not in-place 알고리즘이기 때문에 별도의 메모리 공간이 필요하다.
- stable 알고리즘이다.

<br>

## Big O

- Worst Case: O(nlog₂n)
- Best Case: O(nlog₂n)

병합 정렬은 데이터를 분할하는 단계와 다시 병합하는 단계로 나눌 수 있는데, 분할하는 단계는 시간복잡도에 포함되지 않는다.

<br>

## 구현

1. 리스트의 길이가 0 또는 1이면 이미 정렬된 것으로 본다. 그렇지 않은 경우에는 다음 과정을 따른다.
2. 분할(divide) : 정렬되지 않은 리스트를 절반으로 잘라 비슷한 크기의 두 부분으로 나눈다.
3. 정복(conquer) : 각 부분 리스트를 재귀적으로 병합 정렬을 이용해 정렬한다.
4. 결합(combine) : 두 부분 리스트를 하나의 정렬된 리스트로 병합한다.
5. 복사(copy) : 임시 배열에 저장된 결과를 원래 배열에 복사한다.

다음 이미지를 보면 어떻게 동작하는지 좀 더 쉽게 이해할 수 있다.

![병합 정렬 동작](https://github.com/chanyDev/TIL/blob/main/img/%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98/%EC%A0%95%EB%A0%AC/%EB%B3%91%ED%95%A9%20%EC%A0%95%EB%A0%AC%20%EB%8F%99%EC%9E%91.gif?raw=true)

```js
const merge = (left, right) => {
  const sortedArray = [];

  let leftIndex = 0;
  let rightIndex = 0;

  // 분할된 리스트 중 작은 요소를 새 배열에 삽입
  while (leftIndex < left.length && rightIndex < right.length) {
    if (left[leftIndex] < right[rightIndex]) {
      sortedArray.push(left[leftIndex]);
      leftIndex++;
    } else {
      sortedArray.push(right[rightIndex]);
      rightIndex++;
    }
  }

  console.log(
    `conquer & combine : ${sortedArray.concat(
      left.slice(leftIndex),
      right.slice(rightIndex)
    )}`
  );

  // 분할된 리스트를 하나의 정렬된 리스트로 병합
  return sortedArray.concat(left.slice(leftIndex), right.slice(rightIndex));
};

const mergeSort = array => {
  if (array.length < 2) {
    return array;
  }

  // 리스트를 절반으로 분할
  const middleIndex = Math.floor(array.length / 2);
  const left = array.slice(0, middleIndex);
  const right = array.slice(middleIndex);

  console.log(`divide : left: ${left}, right: ${right}`);

  // 재귀 호출
  return merge(mergeSort(left), mergeSort(right));
};

console.log(mergeSort([5, 4, 3, 2, 1]));
```

실행 결과는 다음과 같다.

![병합 정렬 출력](https://github.com/chanyDev/TIL/blob/main/img/%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98/%EC%A0%95%EB%A0%AC/%EB%B3%91%ED%95%A9%20%EC%A0%95%EB%A0%AC%20%EC%B6%9C%EB%A0%A5.PNG?raw=true)

<br>

### 참고 자료

https://ko.wikipedia.org/wiki/%ED%95%A9%EB%B3%91_%EC%A0%95%EB%A0%AC<br>
https://github.com/trekhleb/javascript-algorithms/tree/master/src/algorithms/sorting/merge-sort<br>
https://gmlwjd9405.github.io/2018/05/08/algorithm-merge-sort.html
